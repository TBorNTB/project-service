@startuml project-creation-sequence
!theme plain
skinparam backgroundColor #FFFFFF

actor User
participant "ProjectController" as Controller
participant "ProjectService" as Service
participant "ProjectRepository" as Repository
participant "ElasticRepository" as Elastic
participant "Redis" as Cache

User -> Controller: POST /projects
activate Controller

Controller -> Service: createProject(request)
activate Service

Service -> Service: validateRequest()
Service -> Service: createProjectEntity()

Service -> Repository: save(projectEntity)
activate Repository
Repository -> Repository: persist to database
Repository --> Service: savedProject
deactivate Repository

Service -> Service: createProjectDoc()
Service -> Elastic: save(projectDoc)
activate Elastic
Elastic -> Elastic: index document
Elastic --> Service: indexed
deactivate Elastic

Service -> Cache: refreshTechStackCache()
activate Cache
Cache -> Cache: update cache
Cache --> Service: cacheUpdated
deactivate Cache

Service --> Controller: ProjectAddResponse
deactivate Service

Controller --> User: 201 Created + Project Info
deactivate Controller

@enduml
