@startuml architecture
!theme plain
skinparam backgroundColor #FFFFFF
skinparam componentStyle rectangle

package "Client Layer" {
  [Web Client]
  [Mobile Client]
}

package "API Gateway" {
  [Gateway]
}

package "Project Service" {
  package "Application Layer" {
    [ProjectController]
    [CategoryController]
    [CollaboratorController]
    [DocumentController]
    [TechStackController]
    [YorkieController]
  }
  
  package "Service Layer" {
    [ProjectService]
    [CategoryService]
    [CollaboratorService]
    [DocumentService]
    [TechStackService]
    [YorkieService]
  }
  
  package "Core Layer" {
    [Project Domain]
    [Category Domain]
    [Collaborator Domain]
    [Document Domain]
    [TechStack Domain]
  }
  
  package "Infrastructure Layer" {
    [JPA Repository]
    [Elasticsearch Repository]
    [Redis Cache]
    [User Client]
  }
}

package "External Services" {
  [User Service]
  [Yorkie Service]
}

database "Database" {
  [PostgreSQL]
  [Elasticsearch]
  [Redis]
}

' Connections
[Web Client] --> [Gateway]
[Mobile Client] --> [Gateway]
[Gateway] --> [ProjectController]
[Gateway] --> [CategoryController]
[Gateway] --> [CollaboratorController]
[Gateway] --> [DocumentController]
[Gateway] --> [TechStackController]
[Gateway] --> [YorkieController]

[ProjectController] --> [ProjectService]
[CategoryController] --> [CategoryService]
[CollaboratorController] --> [CollaboratorService]
[DocumentController] --> [DocumentService]
[TechStackController] --> [TechStackService]
[YorkieController] --> [YorkieService]

[ProjectService] --> [Project Domain]
[CategoryService] --> [Category Domain]
[CollaboratorService] --> [Collaborator Domain]
[DocumentService] --> [Document Domain]
[TechStackService] --> [TechStack Domain]

[Project Domain] --> [JPA Repository]
[Category Domain] --> [JPA Repository]
[Collaborator Domain] --> [JPA Repository]
[Document Domain] --> [JPA Repository]
[TechStack Domain] --> [JPA Repository]

[Document Domain] --> [Elasticsearch Repository]
[Project Domain] --> [Elasticsearch Repository]

[TechStackService] --> [Redis Cache]
[User Client] --> [User Service]
[YorkieService] --> [Yorkie Service]

[JPA Repository] --> [PostgreSQL]
[Elasticsearch Repository] --> [Elasticsearch]
[Redis Cache] --> [Redis]

@enduml
